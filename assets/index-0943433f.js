var P=Object.defineProperty;var M=(s,e,t)=>e in s?P(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var l=(s,e,t)=>(M(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();class u{static coordinatesEqual(e,t){if(!e||!t)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}static hasStartAndEnd(e,t){return!!(e&&t)}static walkBackCoordinates(e,t){let[i,r]=[e[0],e[1]],n=t[i][r].parent;if(n){let a=[n.row,n.col];return[...this.walkBackCoordinates(a,t),[i,r]]}else return[[i,r]]}static changeNodeSelection(e,t){e=="s"?t.style.left="0":e=="e"?t.style.left="33.33%":e=="w"&&(t.style.left="66.66%")}}class ${constructor(e,t,i){l(this,"type");l(this,"wasChecked");l(this,"parent");l(this,"row");l(this,"col");l(this,"neighbors");l(this,"classes");this.type=null,this.wasChecked=!1,this.parent=null,this.row=e,this.col=t,this.neighbors=i,this.classes=[]}getNodeDiv(){let e=document.createElement("div");return e.setAttribute("coordinate",`${this.row}-${this.col}`),e.classList.add("node"),this.type&&e.classList.add(`${this.type}`),this.classes.length>0&&this.classes.forEach(t=>{e.classList.add(t)}),e}refreshNode(){let e=document.querySelector(`[coordinate='${this.row}-${this.col}']`);this.type&&(e==null||e.classList.add(`${this.type}`)),this.classes.length>0&&this.classes.forEach(t=>{e==null||e.classList.add(t)})}}class w{constructor(e){l(this,"htmlEl");l(this,"grid");l(this,"start");l(this,"end");this.htmlEl=e,this.start=null,this.end=null,this.grid=this.createGrid()}createGrid(){const e=[];let t=Math.floor(window.innerWidth/20),i=Math.floor((window.innerHeight-150)/20);for(let r=0;r<i;r++){e[r]=[];for(let n=0;n<t;n++)e[r][n]=new $(r,n,F(r,n,t-1,i-1))}return e}async displayGrid(e){if(e&&await L(e),this.htmlEl){let t=Math.floor(window.innerWidth/20)*20;this.htmlEl.innerHTML="",this.htmlEl.style.width=`${t}px`;for(let i of this.grid)for(let r of i)this.htmlEl.append(r.getNodeDiv())}}async updateNodeState(e,t,i){this.grid[t][i].refreshNode(),await L(e)}async walkBackPathMarking(e){let[t,i]=[];for(let r of e)[t,i]=[r[0],r[1]],this.grid[t][i].type!=="start"&&this.grid[t][i].type!=="end"&&(this.grid[t][i].type="path",await this.updateNodeState(35,t,i))}selectStartNode(e,t){this.start?u.coordinatesEqual([e,t],this.start)?(this.grid[e][t].type=null,this.start=null):(this.grid[this.start[0]][this.start[1]].type=null,this.grid[e][t].type="start",this.start=[e,t]):(this.grid[e][t].type="start",this.start=[e,t])}selectEndNode(e,t){this.end?u.coordinatesEqual([e,t],this.end)?(this.grid[e][t].type=null,this.end=null):(this.grid[this.end[0]][this.end[1]].type=null,this.grid[e][t].type="end",this.end=[e,t]):(this.grid[e][t].type="end",this.end=[e,t])}selectWallNode(e,t){!this.grid[e][t].type&&!u.coordinatesEqual([e,t],this.start)&&!u.coordinatesEqual([e,t],this.end)?this.grid[e][t].type="wall":this.grid[e][t].type&&!u.coordinatesEqual([e,t],this.start)&&!u.coordinatesEqual([e,t],this.end)&&(this.grid[e][t].type=null)}}function L(s){return new Promise(e=>setTimeout(e,s))}function F(s,e,t,i){return e==0||e==t?s==0?e==0?[[s,e+1],[s+1,e]]:[[s+1,e],[s,e-1]]:s==i?e==0?[[s,e+1],[s-1,e]]:[[s,e-1],[s-1,e]]:e==0?[[s,e+1],[s+1,e],[s-1,e]]:[[s+1,e],[s,e-1],[s-1,e]]:s==0||s==i?s==0?[[s,e+1],[s+1,e],[s,e-1]]:[[s,e+1],[s,e-1],[s-1,e]]:[[s,e+1],[s+1,e],[s,e-1],[s-1,e]]}async function O(s,e,t){let i=t.grid,r=[s],n=!1;do{let[a,f]=[r[0][0],r[0][1]];for(let y=0;y<i[a][f].neighbors.length;y++){let o=i[a][f].neighbors[y],h=i[o[0]][o[1]];if(u.coordinatesEqual(o,e)){h.parent=i[a][f],n=!0;break}else!h.wasChecked&&h.type!=="start"&&h.type!=="wall"&&(r.push(o),h.wasChecked=!0,h.parent=i[a][f],h.classes.push("checked"),await t.updateNodeState(15,o[0],o[1]))}r=r.slice(1)}while(!n);return u.walkBackCoordinates(e,i)}let v=document.querySelector("#app"),g=document.querySelector("#AlgoSelect"),m=document.querySelector("#StartFinder"),E=document.querySelector("#ClearFinder"),b=document.querySelector(".current-node-select"),p=document.querySelector("#ThemeToggle"),d=new w(document.getElementById("Grid"));d.displayGrid();p==null||p.addEventListener("change",function(){p.checked?v.classList.add("dk"):v.classList.remove("dk")});let c="s";window.onkeyup=function(s){(s.key=="s"||s.key=="e"||s.key=="w")&&(c=s.key),b&&u.changeNodeSelection(c,b)};var q;(q=d.htmlEl)==null||q.addEventListener("click",function(s){var r;let e=(r=s.target)==null?void 0:r.attributes[0].value.split("-"),[t,i]=[Number(e[0]),Number(e[1])];c=="s"?(d.selectStartNode(t,i),d.displayGrid()):c=="e"?(d.selectEndNode(t,i),d.displayGrid()):c=="w"&&(d.selectWallNode(t,i),d.displayGrid(),N=[t,i])});let k=!1,N=[-1,-1];var S;(S=d.htmlEl)==null||S.addEventListener("mousedown",()=>{k=!0});var G;(G=d.htmlEl)==null||G.addEventListener("mouseup",()=>{k=!1});var C;(C=d.htmlEl)==null||C.addEventListener("mousemove",s=>{var r;if(!k)return;let e=(r=s.target)==null?void 0:r.attributes[0].value.split("-"),[t,i]=[Number(e[0]),Number(e[1])];c=="w"&&!u.coordinatesEqual(N,[t,i])&&(d.selectWallNode(t,i),d.displayGrid(),N=[t,i])});m==null||m.addEventListener("click",function(s){s.preventDefault(),(g==null?void 0:g.value)!=""?new Promise((t,i)=>{d.start&&d.end&&t(O(d.start,d.end,d)),i("This was rejected?")}).then(t=>{d.walkBackPathMarking(t)}):alert("You didn't select a search type thing")});E==null||E.addEventListener("click",function(){location.reload()});window.addEventListener("resize",function(){d=new w(document.getElementById("Grid")),d.displayGrid()});
