var w=Object.defineProperty;var P=(i,e,t)=>e in i?w(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var d=(i,e,t)=>(P(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();class u{static coordinatesEqual(e,t){if(!e||!t)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}static hasStartAndEnd(e,t){return!!(e&&t)}static walkBackCoordinates(e,t){let[s,r]=[e[0],e[1]],n=t[s][r].parent;if(n){let a=[n.row,n.col];return[...this.walkBackCoordinates(a,t),[s,r]]}else return[[s,r]]}static changeNodeSelection(e,t){e=="s"?t.style.left="0":e=="e"?t.style.left="33.33%":e=="w"&&(t.style.left="66.66%")}}class M{constructor(e,t,s){d(this,"type");d(this,"wasChecked");d(this,"parent");d(this,"row");d(this,"col");d(this,"neighbors");d(this,"classes");this.type=null,this.wasChecked=!1,this.parent=null,this.row=e,this.col=t,this.neighbors=s,this.classes=[]}getNodeDiv(){let e=document.createElement("div");return e.setAttribute("coordinate",`${this.row}-${this.col}`),e.classList.add("node"),this.type&&e.classList.add(`${this.type}`),this.classes.length>0&&this.classes.forEach(t=>{e.classList.add(t)}),e}}class C{constructor(e){d(this,"htmlEl");d(this,"grid");d(this,"start");d(this,"end");this.htmlEl=e,this.start=null,this.end=null,this.grid=this.createGrid()}createGrid(){const e=[];let t=Math.floor(window.innerWidth/20),s=Math.floor((window.innerHeight-150)/20);for(let r=0;r<s;r++){e[r]=[];for(let n=0;n<t;n++)e[r][n]=new M(r,n,O(r,n,t-1,s-1))}return e}async displayGrid(e){if(e&&await F(e),this.htmlEl){let t=Math.floor(window.innerWidth/20)*20;this.htmlEl.innerHTML="",this.htmlEl.style.width=`${t}px`;for(let s of this.grid)for(let r of s)this.htmlEl.append(r.getNodeDiv())}}async walkBackPathMarking(e){let[t,s]=[];for(let r of e)[t,s]=[r[0],r[1]],this.grid[t][s].type!=="start"&&this.grid[t][s].type!=="end"&&(this.grid[t][s].type="path"),await this.displayGrid(35)}selectStartNode(e,t){this.start?u.coordinatesEqual([e,t],this.start)?(this.grid[e][t].type=null,this.start=null):(this.grid[this.start[0]][this.start[1]].type=null,this.grid[e][t].type="start",this.start=[e,t]):(this.grid[e][t].type="start",this.start=[e,t])}selectEndNode(e,t){this.end?u.coordinatesEqual([e,t],this.end)?(this.grid[e][t].type=null,this.end=null):(this.grid[this.end[0]][this.end[1]].type=null,this.grid[e][t].type="end",this.end=[e,t]):(this.grid[e][t].type="end",this.end=[e,t])}selectWallNode(e,t){!this.grid[e][t].type&&!u.coordinatesEqual([e,t],this.start)&&!u.coordinatesEqual([e,t],this.end)?this.grid[e][t].type="wall":this.grid[e][t].type&&!u.coordinatesEqual([e,t],this.start)&&!u.coordinatesEqual([e,t],this.end)&&(this.grid[e][t].type=null)}}function F(i){return new Promise(e=>setTimeout(e,i))}function O(i,e,t,s){return e==0||e==t?i==0?e==0?[[i,e+1],[i+1,e]]:[[i+1,e],[i,e-1]]:i==s?e==0?[[i,e+1],[i-1,e]]:[[i,e-1],[i-1,e]]:e==0?[[i,e+1],[i+1,e],[i-1,e]]:[[i+1,e],[i,e-1],[i-1,e]]:i==0||i==s?i==0?[[i,e+1],[i+1,e],[i,e-1]]:[[i,e+1],[i,e-1],[i-1,e]]:[[i,e+1],[i+1,e],[i,e-1],[i-1,e]]}async function B(i,e,t){let s=t.grid,r=[i],n=!1;do{let[a,o]=[r[0][0],r[0][1]];s[a][o].classes.push("checked"),await t.displayGrid(35);for(let y=0;y<s[a][o].neighbors.length;y++){let f=s[a][o].neighbors[y],h=s[f[0]][f[1]];if(u.coordinatesEqual(f,e)){h.parent=s[a][o],n=!0;break}else!h.wasChecked&&h.type!=="start"&&h.type!=="wall"&&(r.push(f),h.wasChecked=!0,h.parent=s[a][o],h.classes.push("queued"),await t.displayGrid(1))}r=r.slice(1)}while(!n);return u.walkBackCoordinates(e,s)}let v=document.querySelector("#app"),g=document.querySelector("#AlgoSelect"),m=document.querySelector("#StartFinder"),E=document.querySelector("#ClearFinder"),L=document.querySelector(".current-node-select"),p=document.querySelector("#ThemeToggle"),l=new C(document.getElementById("Grid"));l.displayGrid();p==null||p.addEventListener("change",function(){p.checked?v.classList.add("dk"):v.classList.remove("dk")});let c="s";window.onkeyup=function(i){(i.key=="s"||i.key=="e"||i.key=="w")&&(c=i.key),L&&u.changeNodeSelection(c,L)};var b;(b=l.htmlEl)==null||b.addEventListener("click",function(i){var r;let e=(r=i.target)==null?void 0:r.attributes[0].value.split("-"),[t,s]=[Number(e[0]),Number(e[1])];c=="s"?(l.selectStartNode(t,s),l.displayGrid()):c=="e"?(l.selectEndNode(t,s),l.displayGrid()):c=="w"&&(l.selectWallNode(t,s),l.displayGrid(),k=[t,s])});let N=!1,k=[-1,-1];var q;(q=l.htmlEl)==null||q.addEventListener("mousedown",()=>{N=!0});var G;(G=l.htmlEl)==null||G.addEventListener("mouseup",()=>{N=!1});var S;(S=l.htmlEl)==null||S.addEventListener("mousemove",i=>{var r;if(!N)return;let e=(r=i.target)==null?void 0:r.attributes[0].value.split("-"),[t,s]=[Number(e[0]),Number(e[1])];c=="w"&&!u.coordinatesEqual(k,[t,s])&&(l.selectWallNode(t,s),l.displayGrid(),k=[t,s])});m==null||m.addEventListener("click",function(i){i.preventDefault(),(g==null?void 0:g.value)!=""?new Promise((t,s)=>{l.start&&l.end&&t(B(l.start,l.end,l)),s("This was rejected?")}).then(t=>{l.walkBackPathMarking(t)}):alert("You didn't select a search type thing")});E==null||E.addEventListener("click",function(){location.reload()});window.addEventListener("resize",function(){l=new C(document.getElementById("Grid")),l.displayGrid()});
